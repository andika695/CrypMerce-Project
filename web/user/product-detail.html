<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Produk - CrypMerce</title>
    <link rel="stylesheet" href="../assets/css/user/header-dashboard.css?v=2">
    <link rel="stylesheet" href="../assets/css/user/product-detail.css?v=2.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="icon" type="image/png" href="../../../assets/images/logo.png">
    <link rel="stylesheet" href="../assets/css/ai-chat.css">
    <!-- midtrans -->
    <script type="text/javascript"
      src="https://app.sandbox.midtrans.com/snap/snap.js"
      data-client-key="Mid-client-3WZHPNbDA-naskBI">
    </script>

</head>
<body>

    <!-- Header / Navbar (Reused) -->
    <header class="header">
        <div class="main-container">
            <div class="header-content">
                <div class="logo">
                    <a href="dashboard.html">
                        <img src="../assets/images/logotesk.png" alt="Logo">
                    </a>
                </div>
                <button class="menu-btn" id="menuBtn">‚ò∞</button>
                
                <!-- Simplified Header for Detail Page -->
                <!-- Desktop Category & Search Wrapper -->
                <div class="search-wrapper">
                     <div class="search-bar">
                        <div class="kategori-wrapper">
                            <button class="kategori-btn">
                                Kategori <span>‚ñº</span>
                            </button>
                            <ul class="kategori-dropdown">
                                <li data-value="fashion-pria">Fashion Pria</li>
                                <li data-value="fashion-wanita">Fashion Wanita</li>
                                <li data-value="handphone">Handphone</li>
                                <li data-value="kecantikan">Kecantikan</li>
                                <li data-value="kesehatan">Kesehatan</li>
                                <li data-value="komputer">Komputer</li>
                                <li data-value="otomotif">Otomotif</li>
                                <li data-value="makanan">Makanan</li>
                            </ul>
                        </div>

                        <input type="search" id="searchInput" placeholder="Cari di CrypMerce">
                        <button class="search-btn" id="searchBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="header-right">
                    <button class="icon-btn" onclick="window.location.href='cart.html'">
                        <img src="../assets/images/bag.png" alt="Bag">
                    </button>

                    <button class="icon-btn" id="notificationBtn">
                        <img src="../assets/images/bell.png" alt="Notif">
                    </button>

                    <button class="akun-btn icon-btn" onclick="window.location.href='profile.php'">
                        <img src="../assets/images/person.png" alt="User">
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="main-container main-content">
        <!-- Breadcrumb / Back Button -->
        <div class="breadcrumb">
            <a href="javascript:history.back()" style="text-decoration: none; color: #4b5563; display: flex; align-items: center; gap: 5px;">
                <i class="fas fa-arrow-left"></i> Kembali
            </a>
        </div>

        <div class="product-detail-grid">
            <!-- Left Column: Images & Seller -->
            <div class="product-left-column">
                <div class="product-gallery">
                    <div class="main-image">
                        <img id="main-img" src="../assets/images/no-image.png" alt="Product Image">
                    </div>
                    <div class="thumbnail-gallery" id="thumbnail-gallery">
                        <!-- Thumbnails will be rendered by JS -->
                    </div>
                </div>

                <!-- Seller Info Widget -->
                <div class="seller-widget">
                    <div class="seller-header">
                        <a id="seller-link" href="#" style="display: flex; align-items: center; gap: 12px; text-decoration: none; color: inherit; flex: 1;">
                            <img id="seller-photo" src="../assets/images/default-avatar.png" alt="Seller">
                            <div class="seller-details">
                                <h3 id="seller-name">Nama Toko</h3>
                                <p class="seller-location">üìç <span id="seller-location">Jakarta</span></p>
                            </div>
                        </a>
                        <button class="btn-follow">Follow</button>
                    </div>
                </div>
            </div>

            <!-- Right Column: Info & Variants -->
            <div class="product-info-section">
                <h1 id="product-name" class="product-title">Memuat Nama Produk...</h1>
                
                <div class="price-section">
                    <h2 id="product-price">Rp 0</h2>
                </div>

                <div class="product-meta">
                    <p>Berat: <span id="product-weight" style="font-weight: 600;">-</span></p>
                </div>
            </div>
        </div>

        <!-- Bottom Section: Description & Reviews -->
        <div class="product-content-bottom">
            <div class="description-section">
                <h3>Deskripsi Produk</h3>
                <div id="product-description" class="description-content">
                    Memuat deskripsi...
                </div>
            </div>
            
            <div class="reviews-section">
                <h3>Ulasan (0)</h3>
                <p>Belum ada ulasan untuk produk ini.</p>
            </div>
        </div>
    </div>

    <!-- STICKY BOTTOM BAR -->
    <div class="sticky-footer">
        <div class="footer-container">
            <!-- Desktop: Full View -->
            <div class="footer-product-summary">
                <img id="footer-img" src="../assets/images/no-image.png" alt="Mini Product">
                <div class="footer-info">
                    <span id="footer-name">Product Name</span>
                    <span id="footer-price">Rp 0</span>
                </div>
            </div>
            
            <!-- Desktop Actions -->
            <div class="footer-actions desktop-actions">
                <div class="quantity-control">
                    <button onclick="decreaseQty()">-</button>
                    <input type="number" id="qty" value="1" min="1" readonly>
                    <button onclick="increaseQty()">+</button>
                </div>
                
                <div class="total-price-label">
                    Total: <strong id="total-price">Rp 0</strong>
                </div>

                <button class="btn-buy-now">Beli Sekarang</button>
                <button class="btn-add-cart">+ Keranjang</button>
            </div>

            <!-- Mobile Actions: Simplified -->
            <div class="footer-actions mobile-actions">
                <button class="btn-buy-mobile" id="btnBuyMobile">
                    <i class="fas fa-shopping-bag"></i> Beli
                </button>
                <button class="btn-cart-mobile" id="btnCartMobile">
                    <i class="fas fa-cart-plus"></i> Keranjang
                </button>
            </div>
        </div>
    </div>

    <!-- PURCHASE POPUP MODAL -->
    <div class="purchase-modal-overlay" id="purchaseModal">
        <div class="purchase-modal">
            <div class="modal-header">
                <h3>Konfirmasi Pembelian</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            
            <div class="modal-product-info">
                <img id="modal-product-img" src="../assets/images/no-image.png" alt="Product">
                <div class="modal-product-details">
                    <h4 id="modal-product-name">Nama Produk</h4>
                    <p id="modal-product-price" class="modal-price">Rp 0</p>
                </div>
            </div>
            
            <div class="modal-quantity-section">
                <label>Jumlah Barang</label>
                <div class="modal-quantity-control">
                    <button class="qty-btn" id="modalDecreaseQty">-</button>
                    <input type="number" id="modalQty" value="1" min="1" readonly>
                    <button class="qty-btn" id="modalIncreaseQty">+</button>
                </div>
            </div>
            
            <div class="modal-total-section">
                <span>Total Pembayaran</span>
                <strong id="modal-total-price">Rp 0</strong>
            </div>
            
            <button class="btn-confirm-purchase" id="btnConfirmPurchase">
                <i class="fas fa-check-circle"></i> Beli Sekarang
            </button>
        </div>
    </div>

    <!-- Modal Toast/Notification -->
    <div id="toast" class="toast">Berhasil ditambahkan ke keranjang</div>

    <div class="mobile-kategori" id="mobileKategori">
        <h3>Kategori Belanja</h3>
        <ul class="kategori-list">
            <li data-value="fashion-pria">Fashion Pria</li>
            <li data-value="fashion-wanita">Fashion Wanita</li>
            <li data-value="handphone">Handphone</li>
            <li data-value="kecantikan">Kecantikan</li>
            <li data-value="kesehatan">Kesehatan</li>
            <li data-value="komputer">Komputer</li>
            <li data-value="otomotif">Otomotif</li>
            <li data-value="makanan">Makanan</li>
        </ul>
    </div>

    <script src="../assets/js/user/notifikasi.js?v=2"></script>
    <script src="../assets/js/user/header.js?v=3"></script>
    <script src="../assets/js/user/product-detail.js?v=2.0"></script>
    <script src="../assets/js/ai-chat.js"></script>
</body>
</html>
